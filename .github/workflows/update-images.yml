name: Update Images
on:
    push:
        paths:
            - 'images/**'
    workflow_dispatch:
jobs:
    update-images:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4

            - name: Generate JSON
              run: |
                # Check if images exist first
                if [ -d "images" ]; then
                IMAGES=$(find images -type f \( -iname "*.jpg" -o -iname "*.jpeg" -o -iname "*.png" -o -iname "*.gif" -o -iname "*.webp" \) | jq -R -s -c 'split("\n")[:-1]')
                echo "{\"images\": $IMAGES}" > images.json
                else
                echo "No 'images' directory found. Creating empty JSON."
                echo '{"images": []}' > images.json
                fi
